defmodule Crosschallenge.NumberExtract.FetchNumbersTest do
  use ExUnit.Case
  alias Crosschallenge.NumberExtract.FetchNumbers

  describe "fetch" do
    test "fetching numbers by page" do
      numbers = [
        0.7594296329040409,
        0.38333763216412375,
        0.9297416335315578,
        0.26047090935544254,
        0.5100977919078046,
        0.8499725115472544,
        0.9419588283975032,
        0.6822784187275351,
        0.8148544382028452,
        0.667055400364314,
        0.34570947341974184,
        0.6706284289637062,
        0.12716660961947468,
        0.4946855286347177,
        0.9706376442639069,
        0.45681333654344963,
        0.30077648521750516,
        0.9436153174485099,
        0.598450892664386,
        0.1850869968462011,
        0.46772355505007807,
        0.12349213445273277,
        0.5306461973059404,
        0.8940263065529799,
        0.7269499513772352,
        0.3521948147870888,
        0.8082664472472174,
        0.9782369447917361,
        0.2309932048934797,
        0.6068948864969328,
        0.3387226458730924,
        0.9824076145436538,
        0.8463523248324464,
        0.3820710007999482,
        0.8425360809655502,
        0.8524457540312265,
        0.6309749565574312,
        0.7093475350872996,
        0.4210139122393244,
        0.8064745087779761,
        0.7392673260739139,
        0.02897062359358451,
        0.1743171137089783,
        0.17580647969568125,
        0.9028646301589315,
        0.7709621663143225,
        0.2208155613047804,
        0.40811407464003213,
        0.3146501855009122,
        0.44032785857198037,
        0.567175771754421,
        0.0739434467247459,
        0.17535707234581174,
        0.2573784384724708,
        0.047163845168786564,
        0.4188170803332168,
        0.3112168276176086,
        0.7442595294423509,
        0.2050347168525336,
        0.5668038793255731,
        0.7220394396779277,
        0.5777286040106158,
        0.4933194900526129,
        0.13546429766230111,
        0.512506834868423,
        0.4748040374892904,
        0.06993942418269969,
        0.33997614649604657,
        0.7537946407852527,
        0.08827255185284688,
        0.4499259659755164,
        0.498475906219274,
        0.5212422327571682,
        0.6392812946176387,
        0.05761497810050874,
        0.9321678047044605,
        0.2857531283011083,
        0.3367402060584076,
        0.6490250758530721,
        0.4233716808905449,
        0.8468291806221455,
        0.17148332261587912,
        4.5786378734986866e-5,
        0.08234415926322813,
        0.4247454014205435,
        0.5164074705459223,
        0.5461166175426243,
        0.09127557644786495,
        0.9581154225817985,
        0.3336773755747122,
        0.13092424020833845,
        0.6422544663473784,
        0.61162198133574,
        0.29252990446751287,
        0.5601236747439897,
        0.15490006578585697,
        0.01291409622720479,
        0.2948335148609912,
        0.4633427967048705,
        0.4528900849961999
      ]

      {_page, response} = FetchNumbers.fetch(10_000)

      assert numbers == response
    end
  end
end
